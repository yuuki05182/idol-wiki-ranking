name: Daily Update

on:
  schedule:
    - cron: '0 18 * * *'  # æ¯æ—¥åˆå‰3æ™‚ï¼ˆæ—¥æœ¬æ™‚é–“ï¼‰ã«å®Ÿè¡Œ
  workflow_dispatch:     # æ‰‹å‹•å®Ÿè¡Œã‚‚å¯èƒ½

permissions:
  contents: write

jobs:
  build:
    runs-on: ubuntu-latest

    steps:
    - name: ãƒªãƒã‚¸ãƒˆãƒªã‚’ãƒã‚§ãƒƒã‚¯ã‚¢ã‚¦ãƒˆ
      uses: actions/checkout@v3

    - name: Pythonã‚’ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—
      uses: actions/setup-python@v4
      with:
        python-version: '3.11'

    - name: å¿…è¦ãªãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
      run: |
        pip install pandas requests jinja2 openpyxl

    - name: ãƒ‡ãƒ¼ã‚¿ã‚’ç”Ÿæˆ
      run: python generate.py

    - name: HTMLã‚’ç”Ÿæˆ
      run: python read_csv.py

    - name: å¤‰æ›´ã‚’ã‚³ãƒŸãƒƒãƒˆã—ã¦push
      run: |
        git config user.name "github-actions[bot]"
        git config user.email "github-actions[bot]@users.noreply.github.com"
        git add .
        git commit -m "ğŸ“Š è‡ªå‹•æ›´æ–°: $(date '+%Y-%m-%d')"
        git push
